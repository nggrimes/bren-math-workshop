<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Bren Calculus Workshop</title>
    <meta charset="utf-8" />
    <meta name="author" content="Nathaniel Grimes" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/chocolate-fonts.css" rel="stylesheet" />
    <link href="libs/tile-view/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view/tile-view.js"></script>
    <link href="libs/tachyons/tachyons.min.css" rel="stylesheet" />
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <script src="libs/fabric/fabric.min.js"></script>
    <link href="libs/xaringanExtra-scribble/scribble.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-scribble/scribble.js"></script>
    <script>document.addEventListener('DOMContentLoaded', function() { window.xeScribble = new Scribble({"pen_color":["#FF0000"],"pen_size":3,"eraser_size":30,"palette":[]}) })</script>
    <script src="libs/clipboard/clipboard.min.js"></script>
    <link href="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"Copy Code","success":"Copied!","error":"Press Ctrl+C to Copy"})</script>
    <link rel="stylesheet" href="ucsb.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Bren Calculus Workshop
]
.subtitle[
## Differential Equations and Numerical Calculus
]
.author[
### Nathaniel Grimes
]
.institute[
### Bren School of Environmental Science &amp; Management
]
.institute[
### University of California at Santa Barbara
]
.date[
### 9/22/2023
]

---







&lt;style type="text/css"&gt;
.xe-scribble__tools.minimized {
  display: none;
}

.remark-slide-content {
  font-size: 28px;
  padding: 20px 80px 20px 80px;
}
.remark-code, .remark-inline-code {
  background: #f0f0f0;
}
.remark-code {
  font-size: 24px;
}
.huge .remark-code { /*Change made here*/
  font-size: 200% !important;
}
.tiny .remark-code { /*Change made here*/
  font-size: 50% !important;
}

.small{
font-size: 22px;
}

.mjx-chtml{ font-size: 100% !important; }

.small-math .mjx-chtml{ font-size: 85%; }
&lt;/style&gt;




# Team Review

How did everyone feel about the problem set?

Anything remaining confusing?

Discuss with Team


---

# Exponents and natural log rules in Integration

$$
\large
\int e^xdx=e^x+C
$$

If the x term gets more complex, we need integration by parts or substiution. Neither we will cover

$$
\large
\int \frac{1}{x}=\ln x+C
$$

$$
`\begin{align}
\int \ln x&amp;=x\ln x-x+C  
\end{align}`
$$
This is solved by integration by parts

---

# How do we solve? 

$$
\large
\frac{dy}{dx}=4y
$$

What are taking the intergral with respect too?

What do we do with the 4y?

What about the dy?

---

# Differential Equations help us understand changing environments

Variables often change with each other and effects over time are extremely important

&lt;img src="img/sir.png" width="60%" style="display: block; margin: auto;" /&gt;


---

# We'll focus on separable first order, ordinary differential equations

*Separable* - Break apart the function into an independent and dependent side

$$
N(y)dy=M(x)dx
$$

*First Order* - Only looking at first derivative rate of changes

$$
\text{Only } \frac{dy}{dx}\text{ , no }\frac{d^2y}{dx^2}
$$

*Ordinary* - We only have one independent variable

---

# Steps for solving an Ordinary Differential Equation (ODE)

1. Move like terms to the same side, including differentials (dx,dy)

2. Apply the integral to both sides

3. Rearrange equations to isolate in terms of dependent variable

4. Use initial conditions (if given) to find C values

5. Evaluate the bounds if definite intervals are given


---

# Start small

$$
\frac{dy}{dx}=4y
$$

--

$$
\frac{dy}{4y}=dx
$$

--

$$
`\begin{align}
\int\frac{dy}{4y}&amp;=\int dx\\
\frac{1}{4}\ln y&amp;=x+C_1 \\
\ln y&amp;=4x+C_2\\
y&amp;=e^{4x+C_2} \\
y&amp;=e^{C_2}e^{4x} \\
y&amp;=Ce^{4x}
\end{align}`
$$

---

# Go big with Lotka-Voltera

&lt;img src="img/lv.jpg" width="55%" style="display: block; margin: auto;" /&gt;

---

# One predator and one prey species

.pull-left[
.center[.bold[Prey Species]]

$$
\frac{dx}{dt}=\alpha x-\beta xy
$$

`\(x\)` is the prey population

`\(t\)` is time

`\(\alpha\)` is the prey growth rate

`\(\beta\)` is the effect of predators on the prey's growth rate
]

.pull-right[
.center[.bold[Predator Species]]

$$
\frac{dy}{dt}=\delta x y-\gamma y
$$

Where `\(y\)` is the population of the predator

`\(\delta\)` is the effect of prey on predators growth rate

`\(\gamma\)` is the predator per capita death rate
]

---

# Combine both equations by eliminating time


$$
`\begin{align}
\frac{dx}{\alpha x-\beta x y}&amp;=dt &amp;\text{Solve for dt}\\
\frac{dy(\alpha x-\beta x y)}{dx}&amp;=\delta x y-\gamma y &amp;\text{Sub in dt}\\
\frac{dy}{dx}&amp;=\frac{\delta x y-\gamma y}{\alpha x-\beta x y}\\
\frac{dy}{dx}&amp;=-\frac{y}{x}\frac{\delta x-\gamma}{\beta y-\alpha} &amp;\text{Pull out x and y}
\end{align}`
$$

What does this model tells us?

---
# Set up Diff eq steps

1) Separate equations

$$
`\begin{align}
\frac{dy}{dx}&amp;=-\frac{y}{x}\frac{\delta x-\gamma}{\beta y-\alpha}\\
\frac{dy(\beta y-\alpha)}{y}&amp;=-\frac{(\delta x-\gamma)dx}{x}
\end{align}`
$$

---

# Diff eq steps

2) Apply integral

$$
`\begin{align}
\int\frac{dy(\beta y-\alpha)}{y}&amp;=-\int\frac{(\delta x-\gamma)dx}{x} \\
\int\beta dy-\int\frac{\alpha}{y}dy&amp;=\int\frac{\gamma}{x}dx-\int\gamma dx &amp;\text{Distribute terms}\\
\beta y-\alpha \ln y&amp;=\delta \ln x-\gamma x +V
\end{align}`
$$

From here we could find intital conditions that lead to a changing population

---

# Just because we solved it does not make it any easier to understand

&lt;img src="img/dynamic.png" width="60%" style="display: block; margin: auto;" /&gt;


---
class: highlight-last-item

# We need computers to solve and visualize many Diff Eqs

- Lotka-Volterra and other dynamic population differential equation models will make appearances in ESM 201

--

- Rate of pollutant concentrations in ESM 202

--

- Solar forcing equations in ESM 203

--

- and many more in your time at Bren!

---
class: title-slide-section-blue, middle, center

# Team Assessment

---

An oil spill of the coast of Santa Barbara is spreading rapidly. Previous spills and an analysis of the current indicate that the oil is spreading at a daily rate of:

$$
\frac{dA}{dt}=-0.001A+60
$$
If after the first day the oil has spread to 25 `\(km^2\)`, find an equation to show the spread of oil in total area.

When will the oil spill cover all of the Santa Barbara Channel (~5850 `\(km^2\)`)?

Hint:(The integral of `\(\frac{1}{ax+b}=\frac{ln(ax+b)}{a}\)` Think reverse chain rule)


---
class: title-slide-section-blue, middle, center

# Numerical Calculus

---

# Functions in R

Like functions in math, R functions are like baking recipes


```r
#cake       #recipe name (Ingredients)
output    &lt;-  mean         (x,...)
```

--


```r
x&lt;-mean(1:5,na.rm=TRUE)
x
```

```
## [1] 3
```
But where are the steps?

---

# All functions have documentation

Any built in function in R describes the function and how to use it


```r
?seq
```

Can always google too for more intuitive descriptions

Actual code is posted if you really want to break down a function

---

# We can make our own functions


```r
#Name i will give   Tell R we want to     Ingredients
#my function        make a function      List
my_first_fun       &lt;-  function        (x,a)   {
  
  # Steps
  y=x+2*a
  
  return(y)  #The cake output
  
} # End the function steps
```


--


```r
my_first_fun(x=1,a=2)
```

```
## [1] 5
```

---

# Key pieces of R functions

1. *Name* - What are we going to call our function?

2.  *Ingredients*  - What goes into our function

3. *Steps*  - All the instructions we apply within our function contained within `\(\{\}\)`

    - Order of steps matter (i.e. can't evaluate z=w+x if x or w have not been created)

4. *Output* - What do we want the function to put out? (By default it is the last object, explicit with `return()`)

---

# Can you arrange this function this function in order to make it work?


.pull-left[

```r
b=(a+x)*y
```


```r
}
```


```r
a=x+y
```


]
.pull-right[


```r
add_multiply&lt;-function(x,y){
```


```r
  return(b)
```

]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
