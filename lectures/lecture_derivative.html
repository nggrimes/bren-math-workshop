<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Bren Calculus Workshop</title>
    <meta charset="utf-8" />
    <meta name="author" content="Nathaniel Grimes" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/chocolate-fonts.css" rel="stylesheet" />
    <link href="libs/tile-view/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view/tile-view.js"></script>
    <link href="libs/tachyons/tachyons.min.css" rel="stylesheet" />
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <script src="libs/fabric/fabric.min.js"></script>
    <link href="libs/xaringanExtra-scribble/scribble.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-scribble/scribble.js"></script>
    <script>document.addEventListener('DOMContentLoaded', function() { window.xeScribble = new Scribble({"pen_color":["#FF0000"],"pen_size":3,"eraser_size":30,"palette":[]}) })</script>
    <link rel="stylesheet" href="ucsb.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Bren Calculus Workshop
]
.subtitle[
## Rules and Applications of Derivatives
]
.author[
### Nathaniel Grimes
]
.institute[
### Bren School of Environmental Science &amp; Management
]
.institute[
### University of California at Santa Barbara
]
.date[
### 9/22/2023
]

---







&lt;style type="text/css"&gt;
.xe-scribble__tools.minimized {
  display: none;
}

.remark-slide-content {
  font-size: 28px;
  padding: 20px 80px 20px 80px;
}
.remark-code, .remark-inline-code {
  background: #f0f0f0;
}
.remark-code {
  font-size: 24px;
}
.huge .remark-code { /*Change made here*/
  font-size: 200% !important;
}
.tiny .remark-code { /*Change made here*/
  font-size: 50% !important;
}

.small{
font-size: 22px;
}

.mjx-chtml{ font-size: 100% !important; }

.small-math .mjx-chtml{ font-size: 85%; }
&lt;/style&gt;




# Team Review

How did everyone feel about the problem set?

Anything remaining confusing?

Discuss with Team


---

# Rules for Derivatives Continued

.center[.bold[Product Rule]]

$$
\large
\frac{d}{dx}=[f(x)*g(x)]=f(x)g'(x)+g(x)f'(x)
$$

Breakdown multiplication into two separate functions

Then keep the first times the derivative of the second and add the first times the derivative of the 2nd.

---

# Product Rule Example

$$
`\begin{align}
y&amp;=2x(x^2+3x) \\
y&amp;=\overbrace{2x}^{f(x)}\overbrace{(x^2+3x)}^{g(x)} &amp;\text{Break into two functions} \\
\frac{dy}{dx}&amp;=\overbrace{2x}^{f(x)}\overbrace{(2x+3)}^{g'(x)}+\overbrace{2}^{f'(x)}\overbrace{(x^2+3x)}^{g(x)} &amp;\text{Apply Power Rule} \\
\frac{dy}{dx}&amp;=6x^2+12x  &amp;\text{Algebra clean up}
\end{align}`
$$

---

# Rules for Derivatives

.center[.bold[Quotient Rule]]

$$
\large
\frac{d}{dx}\left [\frac{f(x)}{g(x)}\right]=\frac{g(x)f'(x)-f(x)g'(x)}{[g(x)]^2}
$$

Same idea as product rule, but order matters

The denominator has to be `\(g(x)\)`

---

# Quotient Rule Example

$$
\small
`\begin{align}
y&amp;=\frac{x^2}{(x+1)} \\
y&amp;=\frac{\overbrace{x^2}^{f(x)}}{\underbrace{(x+1)}_{g(x)}} &amp;\text{Identify function}\\
\frac{dy}{dx}&amp;=\frac{\overbrace{(x+1)}^{g(x)}\overbrace{2x}^{f'(x)}-\overbrace{x^2}^{f(x)}\overbrace{(1)}^{g'(x)}}{\underbrace{(x+1)^2}_{[g(x)]^2}} &amp;\text{Quotient Rule} \\
\frac{dy}{dx}&amp;=\frac{x^2+2x}{(x+1)^2}
\end{align}`
$$

.bold[Note:] Algebraically solving Quotient Rules can be very challenging. Try to reduce it down to a useable form.

---

# Rules of Derivatives continued

.center[.bold[Chain Rule]]

$$
\large
\frac{d}{dx}[f(g(x))]=f'(g(x))g'(x)
$$

Take the derivative of the outermost function then multiply by the derivative of the innermost

Probably the most important rule for advanced calculus

---

# Chain Rule Example

Use a trick called u-substituion

Label the inner function as u

Take the derivative with respect to u

$$
`\begin{align}
y&amp;=(x^3-2)^2\\
g(x)&amp;=u=x^3-2 &amp;f(x)=u^2 \\
\frac{d}{dx}(x^3-2)&amp;=\frac{dy}{du}\cdot\frac{du}{dx}=\frac{d}{du}(u^2)\cdot\frac{d}{dx}(x^3-2)
\end{align}`
$$
---

# Chain Rule Example Continued

$$
`\begin{align}
\frac{d}{dx}(x^3-2)&amp;=\frac{d}{du}(u^2)\cdot\frac{d}{dx}(x^3-2)\\
\frac{d}{du}(u^2)=&amp;2u  &amp;\text{First Term}\\
\frac{d}{dx}(x^3-2)&amp;=3x^2 &amp;\text{Second term}\\
\frac{dy}{dx}&amp;=2u\cdot3x^2 &amp;\text{Total Solution} \\
\frac{dy}{dx}&amp;=2(x^3-2)(3x^2)  &amp;\text{Sub } u=x^3-2\text{ back in}
\end{align}`
$$

---

# An aside on exponents

Base `\(e\)` exponents are unique and useful in many math applications

Originally derived to solve compounding interest rates problems in 1683 by Bernoulli


.pull-left[
It's a constant `\(e\approx 2.72\)`

Comes from this limit 
]

.pull-right[
Follows normal power properties

`\(e^{x+y}=e^x\cdot e^y\)`

`\(e^{-x}=\frac{1}{e^x}\)`

`\(e^{x-y}=\frac{e^x}{e^y}\)`

`\(e^{rx}=(e^x)^r\)`
]


---

# Derivatives of Exponents

$$
\large
\frac{d}{dx}e^x=e^x
$$
.pull-left[
&lt;img src="lecture_derivative_files/figure-html/unnamed-chunk-3-1.png" width="95%" style="display: block; margin: auto;" /&gt;
]

.pull-right[The derivative at every point on this line is simply f(x) 

When x=0, `\(\frac{d}{dx(0)}=1]\)`

---

# Derivatives of Exponents

&lt;img src="img/exp_comic.png" width="25%" style="display: block; margin: auto;" /&gt;


---

# Higher Order Derivatives

- We can continue to take derivatives of derivatives

- The second derivative becomes the rate of change of the rate of change (Think acceleration)

- Notation: 

    - `\(f''(x)\)` or `\(\frac{d^2y}{dx^2}\)`: 2nd Derivative
    
    - `\(f^{(n)}(x)\)` or `\(\frac{d^ny}{dx^n}\)` nth derivative

---

&lt;img src="img/nth.png" width="75%" style="display: block; margin: auto;" /&gt;


---
class: title-slide-section-blue, middle, center

# Team Assessment

---

# Identify which rule works best for each function.

$$
`\begin{align}
\text{A) }y=e^{\sqrt{3x+10}} &amp; &amp;\text{B)  }g(y)=\frac{(8y+2)}{(4y+3)^3}  &amp;  &amp; \text{C) }p(b)=18x\cdot e^{2x}
\end{align}`
$$

.footnote[Assessment continues on next slide]
---

1) Find the first derivative
$$
f(x)=(2x-x^2)^3
$$
2) Find the first derivative

$$
f(x)=\frac{2}{x^2+1}
$$

3) Find the third derivative

$$
f(x)=x^2(2x+1)
$$


---
class: title-slide-section-blue, middle, center

# Applications of Derivatives

---

# Exponential functions in the world

[Infectious diseases](https://ourworldindata.org/covid-cases?country=~USA)

[Human population](https://ourworldindata.org/grapher/population)

[Communication](https://ourworldindata.org/grapher/ict-adoption)

[Growth of Renewable Energy](https://ourworldindata.org/grapher/modern-renewable-prod)

---

# Logistic Growth

Resource limits do exist in the world

$$
`\begin{align}
\frac{dN}{dt}&amp;=rN\left(\frac{K-N}{K}\right) \\
\text{Where }N=\text{population, }r=\text{growth rate, }&amp;t=\text{time, and }K=\text{Carrying Capacity}
\end{align}`
$$

&lt;img src="img/carry.webp" width="50%" style="display: block; margin: auto;" /&gt;


---

# Extremely important in Fisheries and Biological Conservation

.pull-left[
&lt;img src="lecture_derivative_files/figure-html/unnamed-chunk-7-1.png" style="display: block; margin: auto;" /&gt;
]

.pull-right[

&lt;img src="lecture_derivative_files/figure-html/unnamed-chunk-8-1.png" style="display: block; margin: auto;" /&gt;
]
---

# Application of derivatives allows us to find crucial information to solve environmental problems

1) Find instantaneous rate of change at any point

2) Find when functions are increasing or decreasing

3) Find the Optimal values of functions

    - Optimal values are key to designing effective policies

---

# How quickly is the human population rising right now?

Dochy et al. (1995) used the following function to describe the increase in human population over time:

$$
x(t)=\frac{1}{c-\beta t}
$$

Where `\(c=9.833*10^{-3}\)`, `\(\beta=4.849*10^{-6}\)`, and `\(x\)` is the total human population in millions at year `\(t\)`.

How quickly was the human population increasing in 1450?

How fast does this model predict human growth rate should be today in 2023?

---
# Begin by taking the derivative

First think of which rules we would for `\(x(t)=\frac{1}{c-\beta t}\)`

---

# Begin by taking the derivative

First think of which rules we would for `\(x(t)=\frac{1}{c-\beta t}\)`

$$
`\begin{align}
x(t)&amp;=\frac{1}{c-\beta t} \\
x(t)&amp;=(c-\beta t)^-1 &amp;\text{Rearrange} \\
\frac{dx}{dt}&amp;=\beta(c-\beta t)^{-2} &amp;\text{Chain and Power Rule}\\
x'(1450)&amp;=.61 \text{ million per year} &amp;x'(2023)=8,800
\text{ million per year}
\end{align}`
$$
--

Why is this model so wrong?

---
# It isn't wrong, but not predictive out of sample
.pull-left[
&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="img/dochy.png" alt="Figure 2 from Dochy 2015" width="85%" /&gt;
&lt;p class="caption"&gt;Figure 2 from Dochy 2015&lt;/p&gt;
&lt;/div&gt;

]

.pull-right[
&lt;iframe src="https://ourworldindata.org/grapher/population-regions-with-projections" loading="lazy" style="width: 100%; height: 550px; border: 0px none;"&gt;&lt;/iframe&gt;
]

---

# Derivatives help understand the behavior of functions

Useful in designing predictive theory for new policies

Personal Example: Will a fishery insurance program incentivize overfishing?

$$
`\begin{align}
\begin{bmatrix}\frac{\partial K}{\partial \gamma} \\ \frac{\partial L}{\partial \gamma}\end{bmatrix}
=-\begin{bmatrix}
\frac{\partial U}{\partial K \partial K} &amp; \frac{\partial U}{\partial K \partial L} \\
\frac{\partial U}{\partial L \partial K} &amp; \frac{\partial U}{\partial L \partial L}\end{bmatrix}^{-1}\begin{bmatrix}\frac{\partial U}{\partial K \partial \gamma}\\ \frac{\partial U}{\partial L \partial \gamma}\end{bmatrix}
\end{align}`
$$

What conditions lead to:

$$
`\begin{align}
\begin{bmatrix}\frac{\partial K}{\partial \gamma} \\ \frac{\partial L}{\partial \gamma}\end{bmatrix}\lesseqgtr 0
\end{align}`
$$

---

# Let's start a little simpler

.bold[Definition of increasing and decreasing Intervals of a Function]

- For the function f (differentiable on the interval `\((a,b)\)`)

    - If `\(f'(x)&gt;0\)` for all x values between a and b, this interval is increasing
    
    - If `\(f'(x)&lt;0\)` for all x values betwen a and b, this interval is said to be decreasing
    
    - If `\(f'(x)=0\)` for all values between a and b, then the function is constant within the interval
    
---

# Graphical demonstration of Increasing vs Decreasing

&lt;img src="img/increase.png" width="80%" style="display: block; margin: auto;" /&gt;

Helps us find maximums or minimums
---

# Optimization problems find relative extremum (aka max or min) of functions

1) Find First Order Conditions:

- Relative extremum exist at all points on function where `\(f'(x)=0\)`

2) Verify Second Order Conditions:

- Whether an extremum is a maximum or minimum requires us to test if it is increasing or decreasing at the extremum

- `\(f(x^*)\)` is a local maximum if `\(f''(x)&lt;0\)`

- `\(f(x^*)\)` is a local minimum if `\(f''(x)&gt;0\)`

---

# Graphical Example 

.pull-left[
`\(f(x)=x^3-12x+2\)`

Where does `\(f'(x)=0\)`
]

--

.pull-right[

&lt;img src="lecture_derivative_files/figure-html/unnamed-chunk-11-1.png" style="display: block; margin: auto;" /&gt;
]

---

# Solve analytically

First Order Conditions:

$$
`\begin{align}
f(x)&amp;=x^3-12x+2 \\
f'(x)&amp;=3x^2-12 \\
x^*&amp;=-2  &amp; x^*=-2
\end{align}`
$$

Second Order Conditions:

$$
`\begin{align}
f''(x)&amp;=6x \\
f''(-2)&amp;&lt;0  &amp;f''(2)&gt;0
\end{align}`
$$

By the first order conditions we know that `\(x=2\)` and `\(x=-2\)` are local optimum.

The second order conditions inform us that `\(x=-2\)` is a local maximum and `\(x=2\)` is a local minimum.

---
class: title-slide-section-blue, middle, center

# Team Assessment

---

1) How many local min and maximums can you find on this graph?

&lt;img src="lecture_derivative_files/figure-html/unnamed-chunk-12-1.png" style="display: block; margin: auto;" /&gt;

.footnote[Assessment continues on next slide]
---

2) Solve for all optimum. Identify which are minima and which are maxima.

$$
f(x)=2x^3-6x^2+3x+15
$$

.footnote[Assessment continues on next slide]
---

3) Your team has been hired to help the city of Santa Barbara to help eliminate a nasty pollutant in our streams. You are choosing between two policies. Policy A provides `\(\sqrt{10x+4}\)` benefits where `\(x\)` is the dollar spent on interventions. Policy B provides `\(\sqrt{20x+4}\)` benefits for every dollar spent. However, each policy has a cost associated with each. Policy A has a constant linear cost at `\(2x\)` and Policy B has a constant linear cost at `\(3x\)`.

1) Find the optimal amount of interventions dollars to spend for each policy. Consider both costs and benefits. [hint: Remember `\(\sqrt{}\)` is just `\(x^{\frac{1}{2}}\)`. You can use exponent rules to help solve]

2) Which policy provides the most benefits?

3) Which policy is cheaper?

4) Which policy should the city of Santa Barbara pursue?
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
